<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	
	<!-- 총 클래스 개수  -->
	<entry key="selectClassCount">
	
	SELECT COUNT(*) "count"
	FROM CLASS
	
	
	</entry>
	<!-- 클래스 리스트 조회 -->
	<entry key="selectClassList">
	
	 SELECT *
	 FROM
	  (	
		SELECT ROWNUM RNUM, A.*
		FROM	
			(
			 SELECT 
					 CL_NO
					,G.CT_NAME
					,T.TT_NAME
					,CL_NAME
					,C.ENROLL_DATE
					,CL_STATUS
					
				FROM CLASS C
				JOIN CATEGORY G USING (CT_NO)
				JOIN TUTOR T USING (MEM_NO)
			    ORDER BY CL_NO DESC
			)A
	  )	
	WHERE RNUM BETWEEN ?   AND ?
	</entry>
	
	<!--관리자 로그인 -->
	<entry key = "adminLogin">
	SELECT 
      		MEM_ID,
      	    MEM_PWD,
      	    MEM_NAME
       FROM MEMBER
	  WHERE MEM_ID =?
	    AND MEM_PWD = ?
	    AND GRADE = 0
	    AND MEM_STATUS = 'Y'
	</entry>
	
	<!-- 카테고리 대분류 조회 -->	
	<entry key="selectCategoryList">
		SELECT CT_NO
			  ,CT_NAME
		FROM  CATEGORY

	</entry>
	<!-- 세부카테고리 조회 -->
	<entry key="selectDcategoryList">
		SELECT CT_DNO
		      ,CT_NO
		      ,CT_DNAME
		 FROM DCATEGORY     

	</entry>		
	
	<!-- 클래스 상세조회 -->
	<entry key="selectClass">
		SELECT 
	        CL_NO,
	        CT_NAME,
	        CT_DNAME,
	        TT_NAME,
	        LOCAL_NAME,
	        DISTR_NAME,
	        CL_NAME,
	        CL_ADDRESS,
	        CL_MAX,
	        CL_LEVEL,
	        START_DATE,
	        END_DATE,
	        CL_TIMES,
	        CL_SCHEDULE,
	        CL_DAY,
	        TO_CHAR(CL_PRICE, '999,999,999')"CL_PRICE",
	        CL_DETAIL,
	        CURRICULUM,
	        REFUNDPOLICY,
	        CL_SUPPLIES,
	        KEYWORD,
	        C.ENROLL_DATE,
	        CL_STATUS,
	        CL_THUMB,
	        INTRODUCE
	   FROM CLASS C
	   JOIN CATEGORY G USING (CT_NO)
	   JOIN DCATEGORY D USING (CT_DNO)
	   JOIN TUTOR T USING (MEM_NO)
	   JOIN LOCATION USING (LOCAL_CODE)
	   JOIN DISTRICT USING (DISTR_CODE)
	  WHERE CL_NO =?
   
		
	
	</entry>
	
	
	<entry key="selectDetail">
	SELECT CL_DETAIL
	  FROM CLASS
	 WHERE CL_NO =?
	
	
	</entry>
	
	<!-- 스케줄조회 -->
	<entry key="selectSchedule">
	SELECT SCH_NO
		  ,CL_NO
		  ,SESSION_NO
		  ,START_TIME
		  ,END_TIME
	FROM SCHEDULE	
	WHERE CL_NO = ?  
	</entry>
		
		
	<!-- 신규클래스 개수 조회 -->	
	<entry key="selectNewClassCount">
	SELECT COUNT(*) "count"
	FROM CLASS
	WHERE CL_STATUS =0
	
	</entry>
	
	<!-- 신규클래스 리스트 조회 -->
	<entry key="selectNewClassList">
	
	 SELECT *
	 FROM
	  (	
		SELECT ROWNUM RNUM, A.*
		FROM	
			(
			 SELECT 
					 CL_NO
					,G.CT_NAME
					,T.TT_NAME
					,CL_NAME
					,C.ENROLL_DATE
					,CL_STATUS
					
				FROM CLASS C
				JOIN CATEGORY G USING (CT_NO)
				JOIN TUTOR T USING (MEM_NO)
				WHERE CL_STATUS = 0
			    ORDER BY CL_NO DESC
			)A
	  )	
	WHERE RNUM BETWEEN ?   AND ?
	</entry>
	
	<!-- 클래스번호에 따른 튜터정보  -->
	<entry key="selectTutor">
		   
	 SELECT MEM_NO
	        ,TT_NAME
	        ,INTRODUCE
	        ,TT_PROFILE
	   FROM TUTOR
	   JOIN CLASS USING (MEM_NO)
	  WHERE CL_NO= ?
 
	
	</entry>

	<!-- 관리자 클래스 승인 -->
	<entry key="classApprovalUpdate">
	UPDATE CLASS
	  SET UPDATE_DATE = SYSDATE
	     , CL_STATUS = 2
	WHERE  CL_NO =?   

	</entry>
	
	<!-- 관리자 클래스 반려 -->
	<entry key="classRefuseUpdate">
	UPDATE CLASS
	  SET UPDATE_DATE = SYSDATE
	     , CL_STATUS = 1
	     , CL_REFUSE = ?
	WHERE  CL_NO =?   

	</entry>
	
	
		<!-- 클래스 첨부파일 조회 -->
	<entry key="selectAttachment">
		SELECT 
				FILE_NO
			   ,ORIGIN_NAME
			   ,CHANGE_NAME
			   ,FILE_PATH
	    FROM ATTACHMENT
	    WHERE REF_NO = ?
	       

	</entry>
	
	<entry key="searchClass">
	SELECT
			CL_NO
			,G.CT_NAME
			,T.TT_NAME
			,CL_NAME
			,C.ENROLL_DATE
			,CL_STATUS
		
			FROM CLASS C
			JOIN CATEGORY G USING (CT_NO)
			JOIN TUTOR T USING (MEM_NO)
			WHERE
			( CT_NAME||TT_NAME||CL_NAME LIKE ?
			and CT_NAME LIKE ?
			and C.ENROLL_DATE BETWEEN ? AND ?
			and CL_STATUS LIKE ?)
			OR ( CT_NAME LIKE ?)
		

			ORDER BY CL_NO DESC

	
	</entry>
	
	<!-- 기본검색으로 회원조회시 회원리스트 -->
	<entry key="selectMemberList1">
		
		
	</entry>
		
	
</properties>